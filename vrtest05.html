<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>越前国府発掘プロジェクト2VR_Test</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script> <!-- VRとARでバージョン異なる -->
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-cursor-teleport@1.5.0/dist/aframe-cursor-teleport-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-blink-controls/dist/aframe-blink-controls.min.js"></script> <!-- VRとARで異なる -->
<body style="margin:0; background-color: #333;">
<div id="container"></div>

<style>
body {
  font-family: sans-serif;
}
a {
  color: black !important;
}
</style>

<script type="importmap">
{
  "imports": {
    "three": "https://code4fukui.github.io/three.js/build/three.module.js",
    "three/addons/": "https://code4fukui.github.io/three.js/examples/jsm/"
  }
}
</script>

<script type="module">
import * as THREE from "three";
import { initXR, waitLoadGLTF, createModelText, isVisionPro } from "https://code4fukui.github.io/vr-lenspark//threeutil.js";

const { renderer, scene, camera } = initXR();

const offy = isVisionPro() ? .6 : 0;

const txts = [];

{
  const path = "./kokufuhakkutsu2/model02_small.glb";
  const model = await waitLoadGLTF(path);
  model.position.z = -.5;
  model.position.x = .2;
  model.position.y = offy - 0.2;
  scene.add(model);

  const txt = createModelText("ワッフル", .3);
  txt.position.x = model.position.x;
  txt.position.z = model.position.z;
  txt.position.y = model.position.y + .2;
  scene.add(txt);
  txts.push(txt);
}
{
  const path = "./kokufuhakkutsu2/model03_small.glb";
  const model = await waitLoadGLTF(path);
  model.position.z = -.5;
  model.position.x = -.2;
  model.position.y = offy - 0.2;
  scene.add(model);

  const txt = createModelText("ホットサンド", .3);
  txt.position.x = model.position.x;
  txt.position.z = model.position.z;
  txt.position.y = model.position.y + .2;
  scene.add(txt);
  txts.push(txt);
}

renderer.setAnimationLoop(() => {
  renderer.render(scene, camera);
  txts.forEach(i => i.lookAt(camera.position));
});

</script>
</body>
</html>
